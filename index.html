<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Race the Redpanda</title>
    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX transformation -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const RaceRedpandaGame = () => {
            const [gameState, setGameState] = useState('dogSelection');
            const [selectedDog, setSelectedDog] = useState(null);
            const [raceProgress, setRaceProgress] = useState({ dog: 0, redpanda: 0 });
            const [raceStarted, setRaceStarted] = useState(false);

            // Sample dogs data
            const dogs = [
                { id: 1, name: "Koda", breed: "Golden Retriever", bio: "Fast learner, loves fetch, dreams of replacing legacy queues", speed: 0.8 },
                { id: 2, name: "Luna", breed: "Border Collie", bio: "Smart and agile, thinks she can optimize data pipelines", speed: 0.9 },
                { id: 3, name: "Max", breed: "German Shepherd", bio: "Loyal guardian of distributed systems", speed: 0.7 },
                { id: 4, name: "Bella", breed: "Labrador", bio: "Eager to please, specialist in batch processing", speed: 0.6 },
                { id: 5, name: "Charlie", breed: "Husky", bio: "High energy, built for long-running jobs", speed: 0.85 },
                { id: 6, name: "Molly", breed: "Poodle", bio: "Elegant and precise, loves clean code architecture", speed: 0.75 },
                { id: 7, name: "Buddy", breed: "Beagle", bio: "Great at sniffing out data inconsistencies", speed: 0.65 },
                { id: 8, name: "Daisy", breed: "Australian Shepherd", bio: "Herds data like a pro, but struggles with scale", speed: 0.8 },
                { id: 9, name: "Rocky", breed: "Bulldog", bio: "Tough and reliable, but not the fastest", speed: 0.5 },
                { id: 10, name: "Ruby", breed: "Spaniel", bio: "Loves Ruby on Rails, confused about streaming", speed: 0.7 },
                { id: 11, name: "Zeus", breed: "Great Dane", bio: "Massive presence, huge memory footprint", speed: 0.6 },
                { id: 12, name: "Pixie", breed: "Chihuahua", bio: "Small but mighty, perfect for microservices", speed: 0.9 },
                { id: 13, name: "Oscar", breed: "Boxer", bio: "Packs a punch but tires easily under load", speed: 0.7 },
                { id: 14, name: "Rosie", breed: "Retriever Mix", bio: "Great at fetching, struggles with real-time requirements", speed: 0.75 },
                { id: 15, name: "Finn", breed: "Border Terrier", bio: "Scrappy underdog, thinks he can beat anyone", speed: 0.85 }
            ];

            const selectDog = (dog) => {
                setSelectedDog(dog);
            };

            const startRace = () => {
                setGameState('racing');
                setRaceStarted(true);
                setRaceProgress({ dog: 0, redpanda: 0 });

                // Simulate race with intervals
                const raceInterval = setInterval(() => {
                    setRaceProgress(prev => {
                        const dogSpeed = selectedDog.speed * (0.8 + Math.random() * 0.4);
                        const redpandaSpeed = 1.2 + Math.random() * 0.3;
                        
                        const newDogProgress = Math.min(prev.dog + dogSpeed, 100);
                        const newRedpandaProgress = Math.min(prev.redpanda + redpandaSpeed, 100);

                        if (newRedpandaProgress >= 100) {
                            clearInterval(raceInterval);
                            setTimeout(() => setGameState('celebration'), 500);
                        }

                        return { dog: newDogProgress, redpanda: newRedpandaProgress };
                    });
                }, 100);
            };

            const resetGame = () => {
                setGameState('dogSelection');
                setSelectedDog(null);
                setRaceProgress({ dog: 0, redpanda: 0 });
                setRaceStarted(false);
            };

            const DogCard = ({ dog, isSelected, onSelect }) => (
                React.createElement('div', {
                    className: `bg-white rounded-lg shadow-md p-4 cursor-pointer transition-all duration-200 hover:shadow-lg hover:scale-105 ${
                        isSelected ? 'ring-4 ring-blue-500 bg-blue-50' : ''
                    }`,
                    onClick: () => onSelect(dog)
                }, 
                    React.createElement('div', { className: 'text-6xl mb-2' }, 'ğŸ•'),
                    React.createElement('h3', { className: 'font-bold text-lg text-gray-800' }, dog.name),
                    React.createElement('p', { className: 'text-sm text-gray-600 mb-2' }, dog.breed),
                    React.createElement('p', { className: 'text-xs text-gray-500' }, dog.bio)
                )
            );

            const RaceTrack = () => (
                <div className="bg-green-100 p-8 rounded-lg">
                    <h2 className="text-2xl font-bold mb-6 text-center">Data Streaming Challenge</h2>
                    <div className="mb-6">
                        <p className="text-center text-gray-700 mb-4">
                            Process 1M events from 3 pipelines in real-time!
                        </p>
                    </div>
                    
                    {/* Dog Lane */}
                    <div className="mb-8">
                        <div className="flex items-center mb-2">
                            <span className="text-2xl mr-3">ğŸ•</span>
                            <span className="font-semibold">{selectedDog.name}</span>
                        </div>
                        <div className="bg-gray-300 rounded-full h-6 relative overflow-hidden">
                            <div 
                                className="bg-blue-500 h-full transition-all duration-300 rounded-full"
                                style={{ width: `${raceProgress.dog}%` }}
                            ></div>
                            <div 
                                className="absolute top-0 left-0 h-full flex items-center text-xl transition-all duration-300"
                                style={{ left: `${Math.max(raceProgress.dog - 5, 0)}%` }}
                            >
                                ğŸ•
                            </div>
                        </div>
                        <p className="text-sm text-gray-600 mt-1">Processing: {Math.round(raceProgress.dog)}%</p>
                    </div>

                    {/* Redpanda Lane */}
                    <div className="mb-8">
                        <div className="flex items-center mb-2">
                            <span className="text-2xl mr-3">ğŸ¼</span>
                            <span className="font-semibold">Redpanda</span>
                        </div>
                        <div className="bg-gray-300 rounded-full h-6 relative overflow-hidden">
                            <div 
                                className="bg-red-500 h-full transition-all duration-300 rounded-full"
                                style={{ width: `${raceProgress.redpanda}%` }}
                            ></div>
                            <div 
                                className="absolute top-0 left-0 h-full flex items-center text-xl transition-all duration-300"
                                style={{ left: `${Math.max(raceProgress.redpanda - 5, 0)}%` }}
                            >
                                ğŸ¼
                            </div>
                        </div>
                        <p className="text-sm text-gray-600 mt-1">Processing: {Math.round(raceProgress.redpanda)}%</p>
                    </div>

                    {raceProgress.redpanda >= 100 && (
                        <div className="text-center">
                            <div className="text-4xl mb-2">ğŸ†</div>
                            <p className="text-xl font-bold text-red-600">Redpanda Wins!</p>
                        </div>
                    )}
                </div>
            );

            const Celebration = () => (
                <div className="text-center bg-gradient-to-r from-red-50 to-orange-50 p-8 rounded-lg">
                    <div className="text-8xl mb-4">ğŸ‰</div>
                    <h2 className="text-3xl font-bold text-red-600 mb-4">Redpanda Wins Again!</h2>
                    <div className="bg-white rounded-lg p-6 shadow-lg max-w-2xl mx-auto">
                        <p className="text-lg mb-4">
                            Even the goodest dog can't beat Redpanda! ğŸ¼
                        </p>
                        <div className="text-left space-y-3">
                            <p className="flex items-start">
                                <span className="text-red-500 font-bold mr-2">âš¡</span>
                                <span><strong>Built in C++</strong> - Thread-per-core architecture for maximum performance</span>
                            </p>
                            <p className="flex items-start">
                                <span className="text-red-500 font-bold mr-2">ğŸš€</span>
                                <span><strong>Deploy in minutes</strong> - Single binary, no complex dependencies</span>
                            </p>
                            <p className="flex items-start">
                                <span className="text-red-500 font-bold mr-2">ğŸ¯</span>
                                <span><strong>Kafka API compatible</strong> - Drop-in replacement with 10x better performance</span>
                            </p>
                        </div>
                        <p className="text-lg mt-6 font-semibold text-gray-700">
                            Redpanda doesn't just competeâ€”it leads the pack in real-time data streaming!
                        </p>
                    </div>
                    <button 
                        onClick={() => setGameState('results')}
                        className="mt-6 bg-red-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors"
                    >
                        Get Your Results â†’
                    </button>
                </div>
            );

            const Results = () => (
                <div className="text-center bg-gray-50 p-8 rounded-lg">
                    <div className="bg-white rounded-lg p-6 shadow-lg max-w-md mx-auto">
                        <h3 className="text-xl font-bold mb-4">Race Results</h3>
                        <div className="text-6xl mb-3">ğŸ†</div>
                        <p className="text-lg mb-2">
                            <strong>{selectedDog.name}</strong> gave it their best shot!
                        </p>
                        <p className="text-gray-600 mb-4">
                            But Redpanda's optimized C++ engine was just too fast for traditional approaches.
                        </p>
                        <div className="bg-red-50 p-4 rounded-lg mb-4">
                            <p className="font-semibold text-red-800">Want to learn more about why Redpanda always wins?</p>
                        </div>
                        <button 
                            onClick={resetGame}
                            className="bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors mr-3"
                        >
                            Race Again
                        </button>
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gradient-to-b from-blue-50 to-green-50 p-4">
                    <div className="max-w-6xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-8">
                            <h1 className="text-4xl font-bold text-gray-800 mb-2">
                                ğŸ¼ Race the Redpanda ğŸ
                            </h1>
                            <p className="text-gray-600">
                                Can your chosen dog beat Redpanda in a real-time data streaming challenge?
                            </p>
                        </div>

                        {/* Game States */}
                        {gameState === 'dogSelection' && (
                            <div>
                                <h2 className="text-2xl font-bold text-center mb-6">Choose Your Racing Dog</h2>
                                <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
                                    {dogs.map(dog => (
                                        <DogCard 
                                            key={dog.id} 
                                            dog={dog} 
                                            isSelected={selectedDog?.id === dog.id}
                                            onSelect={selectDog}
                                        />
                                    ))}
                                </div>
                                {selectedDog && (
                                    <div className="text-center">
                                        <div className="bg-white rounded-lg p-6 shadow-lg max-w-md mx-auto mb-6">
                                            <h3 className="text-xl font-bold mb-2">You chose {selectedDog.name}!</h3>
                                            <p className="text-gray-600 mb-4">{selectedDog.bio}</p>
                                            <button 
                                                onClick={startRace}
                                                className="bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors"
                                            >
                                                Start the Race! ğŸ
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {gameState === 'racing' && <RaceTrack />}
                        {gameState === 'celebration' && <Celebration />}
                        {gameState === 'results' && <Results />}
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<RaceRedpandaGame />, document.getElementById('root'));
    </script>
</body>
</html>